(this["webpackJsonpnd0191-myreads"]=this["webpackJsonpnd0191-myreads"]||[]).push([[0],{16:function(e,t,n){},18:function(e,t,n){},20:function(e,t,n){"use strict";n.r(t);var s=n(0),c=n.n(s),a=n(11),o=n.n(a),r=n(5),i=(n(16),n(6)),l=n.n(i),u=n(8),h=n(4),d=(n(18),n(2)),j=n(7),b="https://reactnd-books-api.udacity.com",f=localStorage.token;f||(f=localStorage.token=Math.random().toString(36).substr(-8));var p={Accept:"application/json",Authorization:f},O=function(e,t){return fetch("".concat(b,"/search"),{method:"POST",headers:Object(j.a)(Object(j.a)({},p),{},{"Content-Type":"application/json"}),body:JSON.stringify({query:e,maxResults:t})}).then((function(e){return e.json()})).then((function(e){return e.books}))},v=n(1),x=function(e){var t=e.booksList,n=e.shelves,s=e.updateShelf;return Object(v.jsx)("ol",{className:"books-grid",children:t.filter((function(e){return e.imageLinks&&e.authors})).map((function(e){return Object(v.jsx)("li",{children:Object(v.jsxs)("div",{className:"book",children:[Object(v.jsxs)("div",{className:"book-top",children:[Object(v.jsx)("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:"url(".concat(e.imageLinks.thumbnail,")")}}),Object(v.jsx)("div",{className:"book-shelf-changer",children:Object(v.jsxs)("select",{value:e.shelf?e.shelf:"none",onChange:function(t){return function(e,t){s(t,e.target.value)}(t,e)},children:[Object(v.jsx)("option",{value:"move-to",disabled:!0,children:"Move to..."}),n.map((function(e){return Object(v.jsx)("option",{value:e.id,children:e.name},e.id)}))]})})]}),Object(v.jsx)("div",{className:"book-title",children:e.title}),Object(v.jsx)("div",{className:"book-authors",children:e.authors.join(" and ")})]})},e.id)}))})},m=function(e){var t=e.shelves,n=e.shelf,s=e.shelfBooks,c=e.updateShelf;return Object(v.jsxs)("div",{className:"bookshelf",children:[Object(v.jsx)("h2",{className:"bookshelf-title",children:n}),Object(v.jsx)("div",{className:"bookshelf-books",children:Object(v.jsx)(x,{booksList:s,shelves:t,updateShelf:c})})]})},k=function(e){var t=e.allBooks,n=e.shelves,s=e.updateShelf;return Object(v.jsxs)("div",{className:"list-books",children:[Object(v.jsx)("div",{className:"list-books-title",children:Object(v.jsx)("h1",{children:"MyReads"})}),Object(v.jsx)("div",{className:"list-books-content",children:Object(v.jsx)("div",{children:n.map((function(e){return"none"!==e.id&&Object(v.jsx)(m,{shelves:n,shelf:e.name,shelfBooks:t.filter((function(t){return t.shelf===e.id})),updateShelf:s},e.id)}))})}),Object(v.jsx)("div",{className:"open-search",children:Object(v.jsx)(r.b,{to:"/search",children:"Add a book"})})]})},N=function(e){var t=e.allBooks,n=e.shelves,c=e.updateShelf,a=Object(s.useState)(""),o=Object(h.a)(a,2),i=o[0],d=o[1],j=Object(s.useState)([]),b=Object(h.a)(j,2),f=b[0],p=b[1];return Object(s.useEffect)((function(){var e=!1;return function(){var n=Object(u.a)(l.a.mark((function n(s){var c,a;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=18;break}if(!s){n.next=16;break}return n.prev=2,n.next=5,O(s);case 5:a=n.sent,!(o=a).error&&o.map((function(e){return t.map((function(t){return e.id===t.id&&(e.shelf=t.shelf)}))})),c=o,console.log(c),n.next=14;break;case 10:n.prev=10,n.t0=n.catch(2),c=n.t0,console.log(n.t0);case 14:n.next=17;break;case 16:c=[];case 17:p(c);case 18:case"end":return n.stop()}var o}),n,null,[[2,10]])})));return function(e){return n.apply(this,arguments)}}()(i),function(){e=!0}}),[t,i]),Object(v.jsxs)("div",{className:"search-books",children:[Object(v.jsxs)("div",{className:"search-books-bar",children:[Object(v.jsx)(r.b,{className:"close-search",to:"/",children:"Close"}),Object(v.jsx)("div",{className:"search-books-input-wrapper",children:Object(v.jsx)("input",{type:"text",placeholder:"Search by title, author, or ISBN",value:i,onChange:function(e){return function(e){d(e)}(e.target.value)}})})]}),Object(v.jsx)("div",{className:"search-books-results",children:f&&(f.error?Object(v.jsx)("p",{style:{textAlign:"center"},children:'No results found for your search "'.concat(i,'".')}):Object(v.jsx)(x,{booksList:f,shelves:n,updateShelf:c}))})]})};var g=function(){var e=Object(s.useState)([]),t=Object(h.a)(e,2),n=t[0],c=t[1],a=[{id:"currentlyReading",name:"Currently Reading"},{id:"wantToRead",name:"Want to Read"},{id:"read",name:"Read"},{id:"none",name:"None"}],o=function(e,t){if(n.includes(e)){var s=n.map((function(n){return n.id===e.id&&(n.shelf=t),n}));c(s)}else{var a;e.shelf=t,a=e,c(n.concat(a))}!function(e,t){fetch("".concat(b,"/books/").concat(e.id),{method:"PUT",headers:Object(j.a)(Object(j.a)({},p),{},{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then((function(e){return e.json()}))}(e,t)};return Object(s.useEffect)((function(){(function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(b,"/books"),{headers:p}).then((function(e){return e.json()})).then((function(e){return e.books}));case 2:t=e.sent,c(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(v.jsx)("div",{className:"app",children:Object(v.jsxs)(d.c,{children:[Object(v.jsx)(d.a,{exact:!0,path:"/",element:Object(v.jsx)(k,{allBooks:n,shelves:a,updateShelf:o})}),Object(v.jsx)(d.a,{path:"/search",element:Object(v.jsx)(N,{allBooks:n,shelves:a,updateShelf:o})})]})})};o.a.render(Object(v.jsx)(c.a.StrictMode,{children:Object(v.jsx)(r.a,{children:Object(v.jsx)(g,{})})}),document.getElementById("root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.81b612ba.chunk.js.map